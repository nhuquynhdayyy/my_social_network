<!-- accounts/templates/accounts/friend_list.html -->
{% extends "posts/base.html" %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Bạn bè của {{ profile_user.username }}</h2>
    
    {% if friends %}
        <div class="row">
            {% for friend in friends %}
            <div class="col-md-6 mb-3">
                <div class="card">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center">
                            <img src="{{ friend.avatar.url }}" class="rounded-circle me-3" width="50" height="50" alt="{{ friend.username }}">
                            <a href="{% url 'accounts:profile' username=friend.username %}" class="text-decoration-none fw-bold">
                                {{ friend.first_name }} {{ friend.last_name }}
                            </a>
                        </div>
                        <!-- Nút Hủy kết bạn chỉ hiện ra nếu đang xem danh sách bạn bè của chính mình -->
                        {% if user.is_authenticated and user == profile_user %}
                            <a href="{% url 'accounts:unfriend' username=friend.username %}" class="btn btn-danger btn-sm">Hủy kết bạn</a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>{{ profile_user.username }} chưa có bạn bè nào.</p>
    {% endif %}
</div>
{% endblock content %}